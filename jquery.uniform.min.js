(function(a){a.uniform={defaults:{selectClass:"selector",radioClass:"radio",checkboxClass:"checker",fileClass:"uploader",filenameClass:"filename",fileBtnClass:"action",fileDefaultText:"No file selected",fileBtnText:"Choose File",checkedClass:"checked",focusClass:"focus",disabledClass:"disabled",buttonClass:"button",activeClass:"active",hoverClass:"hover",useID:true,idPrefix:"uniform",resetSelector:false,autoHide:true,autoWidth:true}};a.uniform.init=function(e,b){var c=b.data("uniform");if(c!==undefined&&c!==null){c.opts=a.extend(c.opts,e)}else{b.data("uniform",{});c=b.data("uniform");c.wrapped=false;c.opts=e;c.type=a.uniform.elType(b)}a.uniform.run(b)};a.uniform.run=function(b){var c=b.data("uniform");switch(c.type){case"input":a.uniform.doInput(b);break;case"textarea":a.uniform.doTextarea(b);break;case"select":a.uniform.doSelect(b);break;case"radio":a.uniform.doRadio(b);break;case"file":a.uniform.doFile(b);break;case"checkbox":a.uniform.doCheckbox(b);break;case"button":a.uniform.doButton(b);break}};a.uniform.set=function(c,e,b){if(b.data("uniform")){var f=b.data("uniform");f.opts[c]=e;a.uniform.run(b)}};a.uniform.fetch=function(c,b){if(b.data("uniform")){var e=b.data("uniform");return e.opts[c]}};a.uniform.elType=function(c){var b=c[0].tagName;if(b==="SELECT"){if(c.attr("multiple")!==true){if(c.attr("size")===undefined||c.attr("size")<=1){return"select"}else{return"invalid"}}else{return"invalid"}}else{if(b==="INPUT"){var d=c[0].type;if(d==="checkbox"){return"checkbox"}else{if(d==="radio"){return"radio"}else{if(d==="file"){return"file"}else{if(d==="text"||d==="password"||d==="email"){return"input"}else{if(d==="submit"||d==="reset"||d==="button"){return"button"}}}}}}else{if(b==="TEXTAREA"){return"textarea"}else{if(b==="A"||b==="BUTTON"){return"button"}}}}};a.uniform.doInput=function(b){var c=b.data("uniform");if(!c.wrapped){b.addClass(b.attr("type"));c.wrapped=true}};a.uniform.doTextarea=function(b){var c=b.data("uniform");if(!c.wrapped){b.addClass("uniform");c.wrapped=true}};a.uniform.doButton=function(c){var e,b=c[0].tagName,f=c.data("uniform");if(f.wrapped!==true){c.wrap("<div>").before("<span>");f.spanTag=c.prev("span");f.divTag=c.closest("div");c.css("opacity",0);f.wrapped=true}c.unbind(".uniform");f.divTag.removeClass().addClass(f.opts.buttonClass);a.uniform.setID(c);if(b=="A"||b=="BUTTON"){e=c.text()}else{if(b=="INPUT"){e=c.attr("value")}}e=(e=="")?c[0].type=="reset"?"Reset":"Submit":e;f.spanTag.html(e);if(c.is(":disabled")){f.divTag.addClass(f.opts.disabledClass)}f.divTag.bind({"mouseenter.uniform":function(){f.divTag.addClass(f.opts.hoverClass)},"mouseleave.uniform":function(){f.divTag.removeClass(f.opts.hoverClass).removeClass(f.opts.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.divTag.addClass(f.opts.activeClass)},"mouseup.uniform touchend.uniform":function(){f.divTag.removeClass(f.opts.activeClass)},"click.uniform touchend.uniform":function(g){if(a(g.target).is("span")||a(g.target).is("div")){if(c[0].dispatchEvent){var d=document.createEvent("MouseEvents");d.initEvent("click",true,true);c[0].dispatchEvent(d)}else{c[0].click()}}}});c.bind({"focus.uniform":function(){f.divTag.addClass(f.opts.focusClass)},"blur.uniform":function(){f.divTag.removeClass(f.opts.focusClass)},"restore.uniform":a.uniform.restore,"disable.uniform":a.uniform.disable,"enable.uniform":a.uniform.enable});a.uniform.noSelect(f.divTag)};a.uniform.doSelect=function(b){var f=b.data("uniform");if(f.wrapped!==true){var e=b.width();b.wrap("<div>").before("<span>");f.divTag=b.closest("div");f.spanTag=b.prev("span");if(!b.css("display")=="none"&&f.opts.autoHide){f.divTag.hide()}b.css("opacity",0);if(f.opts.autoWidth===true){f.divTag.css("width",e)}f.wrapped=true}b.unbind(".uniform");f.divTag.removeClass().addClass(f.opts.selectClass);a.uniform.setID(b);var c=b.find(":selected:first");if(c.length==0){c=b.find("option:first")}f.spanTag.html(c.html());b.bind({"change.uniform":function(){f.spanTag.html(b.find(":selected").html());f.divTag.removeClass(f.opts.activeClass)},"focus.uniform":function(){f.divTag.addClass(f.opts.focusClass)},"blur.uniform":function(){f.divTag.removeClass(f.opts.focusClass).removeClass(f.opts.activeClass)},"mousedown.uniform touchbegin.uniform":function(){f.divTag.addClass(f.opts.activeClass)},"mouseup.uniform touchend.uniform":function(){f.divTag.removeClass(f.opts.activeClass)},"mouseenter.uniform":function(){f.divTag.addClass(f.opts.hoverClass)},"mouseleave.uniform":function(){f.divTag.removeClass(f.opts.hoverClass).removeClass(f.opts.activeClass)},"click.uniform touchend.uniform":function(){f.divTag.removeClass(f.opts.activeClass)},"keyup.uniform":function(){f.spanTag.text(b.find(":selected").html())},"restore.uniform":a.uniform.restore,"disable.uniform":a.uniform.disable,"enable.uniform":a.uniform.enable});if(b.is(":disabled")){f.divTag.addClass(f.opts.disabledClass)}a.uniform.noSelect(f.spanTag)};a.uniform.doCheckbox=function(b){var c=b.data("uniform");if(c.wrapped!==true){b.wrap("<div>").wrap("<span>");c.divTag=b.closest("div");c.spanTag=b.closest("span");if(!b.css("display")=="none"&&c.opts.autoHide){c.divTag.hide()}b.css("opacity",0);c.wrapped=true}b.unbind(".uniform");c.divTag.removeClass().addClass(c.opts.checkboxClass);c.spanTag.removeClass();a.uniform.setID(b);b.bind({"focus.uniform":function(){c.divTag.addClass(c.opts.focusClass)},"blur.uniform":function(){c.divTag.removeClass(c.opts.focusClass)},"click.uniform touchend.uniform":function(){if(!b.attr("checked")){c.spanTag.removeClass(c.opts.checkedClass)}else{c.spanTag.addClass(c.opts.checkedClass)}},"mousedown.uniform touchbegin.uniform":function(){c.divTag.addClass(c.opts.activeClass)},"mouseup.uniform touchend.uniform":function(){c.divTag.removeClass(c.opts.activeClass)},"mouseenter.uniform":function(){c.divTag.addClass(c.opts.hoverClass)},"mouseleave.uniform":function(){c.divTag.removeClass(c.opts.hoverClass).removeClass(c.opts.activeClass)},"check.uniform":a.uniform.check,"uncheck.uniform":a.uniform.uncheck,"disable.uniform":a.uniform.disable,"enable.uniform":a.uniform.enable,"restore.uniform":a.uniform.restore});if(b.attr("checked")){c.spanTag.addClass(c.opts.checkedClass)}if(b.is(":disabled")){c.divTag.addClass(c.opts.disabledClass)}};a.uniform.doRadio=function(b){var c=b.data("uniform");if(c.wrapped!==true){b.wrap("<div>").wrap("<span>");c.divTag=b.closest("div");c.spanTag=b.closest("span");if(!b.css("display")=="none"&&c.opts.autoHide){c.divTag.hide()}b.css("opacity",0);c.wrapped=true}b.unbind(".uniform");c.divTag.removeClass().addClass(c.opts.radioClass);c.spanTag.attr("class","");a.uniform.setID(b);b.bind({"focus.uniform":function(){c.divTag.addClass(c.opts.focusClass)},"blur.uniform":function(){c.divTag.removeClass(c.opts.focusClass)},"click.uniform touchend.uniform":function(){if(!b.attr("checked")){c.spanTag.removeClass(c.opts.checkedClass)}else{var d=c.opts.radioClass.split(" ")[0];a("."+d+" span").has("input[name="+b.attr("name")+"]").removeClass(c.opts.checkedClass);c.spanTag.addClass(c.opts.checkedClass)}},"mousedown.uniform touchend.uniform":function(){if(!b.is(":disabled")){c.divTag.addClass(c.opts.activeClass)}},"mouseup.uniform touchbegin.uniform":function(){c.divTag.removeClass(c.opts.activeClass)},"mouseenter.uniform touchend.uniform":function(){c.divTag.addClass(c.opts.hoverClass)},"mouseleave.uniform":function(){c.divTag.removeClass(c.opts.hoverClass).removeClass(c.opts.activeClass)},"check.uniform":a.uniform.check,"uncheck.uniform":a.uniform.uncheck,"disable.uniform":a.uniform.disable,"enable.uniform":a.uniform.enable,"restore.uniform":a.uniform.restore});if(b.attr("checked")){c.spanTag.addClass(c.opts.checkedClass)}if(b.is(":disabled")){c.divTag.addClass(c.opts.disabledClass)}};a.uniform.doFile=function(f){var h=f.data("uniform");if(h.wrapped!==true){var c=a("<span>"+h.opts.fileBtnText+"</span>"),g=a("<span>"+h.opts.fileDefaultText+"</span>");f.wrap("<div>").after(c).after(g);h.divTag=f.closest("div");h.filenameTag=f.next();h.btnTag=h.filenameTag.next();if(!f.css("display")==="none"&&h.opts.autoHide){h.divTag.hide()}f.css("opacity",0);h.wrapped=true}f.unbind(".uniform");h.divTag.removeClass().addClass(h.opts.fileClass);h.filenameTag.removeClass().addClass(h.opts.filenameClass);h.btnTag.removeClass().addClass(h.opts.fileBtnClass);a.uniform.setID(f);if(!f.attr("size")){var b=h.divTag.width();f.attr("size",h.divWidth/10)}var e=function(){var d=f.val();if(d===""){d=h.opts.fileDefaultText}else{d=d.split(/[\/\\]+/);d=d[(d.length-1)]}h.filenameTag.text(d)};e();f.bind({"focus.uniform":function(){h.divTag.addClass(h.opts.focusClass)},"blur.uniform":function(){h.divTag.removeClass(h.opts.focusClass)},"mousedown.uniform":function(){if(!f.is(":disabled")){h.divTag.addClass(h.opts.activeClass)}},"mouseup.uniform":function(){h.divTag.removeClass(h.opts.activeClass)},"mouseenter.uniform":function(){h.divTag.addClass(h.opts.hoverClass)},"mouseleave.uniform":function(){h.divTag.removeClass(h.opts.hoverClass).removeClass(h.opts.activeClass)},"restore.uniform":a.uniform.restore,"disable.uniform":a.uniform.disable,"enable.uniform":a.uniform.enable});if(a.browser.msie){f.bind("click.uniform.ie7",function(){setTimeout(e,0)})}else{f.bind("change.uniform",e)}if(f.attr("disabled")){h.divTag.addClass(h.opts.disabledClass)}a.uniform.noSelect(h.filenameTag);a.uniform.noSelect(h.btnTag)};a.uniform.setID=function(b){var c=b.data("uniform");if(c.opts.useID===true&&b.attr("id")!==""){c.divTag.attr("id",c.opts.idPrefix+"-"+b.attr("id"))}};a.uniform.noSelect=function(b){function c(){return false}a(b).each(function(){this.onselectstart=this.ondragstart=c;a(this).mousedown(c).css({MozUserSelect:"none"})})};a.uniform.check=function(){var b=a(this).data("uniform");this.checked=true;a.uniform.update(this)};a.uniform.uncheck=function(){this.checked=false;a.uniform.update(this)};a.uniform.disable=function(){var b=a(this).data("uniform");this.disabled=true;a.uniform.update(this)};a.uniform.enable=function(){var b=a(this).data("uniform");this.disabled=false;a.uniform.update(this)};a.uniform.update=function(b){a(b).each(function(){var c=a(this);if(c.data("uniform")){a.uniform.run(c)}})};a.uniform.restore=function(){var b=a(this),c=b.data("uniform").type;if(c==="checkbox"){b.unwrap().unwrap()}else{if(c==="select"){b.siblings("span").remove();b.unwrap()}else{if(c==="radio"){b.unwrap().unwrap()}else{if(c==="file"){b.siblings("span").remove();b.unwrap()}else{if(c==="button"){b.siblings("span").remove();b.unwrap()}}}}}b.unbind(".uniform").css("opacity","1")};if(a.browser.msie&&a.browser.version<7){a.support.selectOpacity=false}else{a.support.selectOpacity=true}a.fn.uniform=function(c,b){if(c){if(typeof c=="object"){var d=a.extend(a.uniform.defaults,c);return this.each(function(){a.uniform.init(d,a(this))})}else{if(typeof c=="string"){if(b){return this.each(function(){a.uniform.set(c,b,a(this))})}else{return a.uniform.fetch(c,a(this))}}}}else{return this.each(function(){if(a.support.selectOpacity){a.uniform.init(a.uniform.defaults,a(this))}})}}})(jQuery);